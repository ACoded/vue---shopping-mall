"use strict";function getQueryString(e){var n=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),i=window.location.search.substr(1).match(n);return null!=i?unescape(i[2]):null}var mobile=document.querySelector(".share_main_registermobile"),code=document.querySelector(".share_main_registercode"),getCode=document.querySelector(".share_main_registergetcode"),password=document.querySelector(".share_main_registerpassword"),confrim=document.querySelector(".share_main_confrim"),isdisabled=!1,intr=void 0;getCode.addEventListener("click",function(){return mobile.value?isdisabled?!1:void $.ajax({url:"https://isapi.zujiekeji.cn/index/user/send_phone_code",type:"POST",data:{user_phone:mobile.value,type:"register"},async:!0,dataType:"json",success:function(e){return 200!=e.code?(confrim.innerText=e.msg,confrim.style.display="block",setTimeout(function(){confrim.style.display="none"},1500),!1):(isdisabled=!0,getCode.innerText=60,intr=setInterval(function(){return 1==getCode.innerText?(isdisabled=!1,getCode.innerText="获取验证码",clearInterval(intr),!1):void(getCode.innerText-=1)},1e3),void 0)},error:function(){}}):(confrim.innerText="请输入手机号码",confrim.style.display="block",setTimeout(function(){confrim.style.display="none"},1500),!1)}),document.querySelector(".share_main_registerbtn").addEventListener("click",function(){return mobile.value?code.value?password.value?($.ajax({url:"https://isapi.zujiekeji.cn/index/user/app_register",type:"POST",data:{user_phone:mobile.value,code:code.value,user_password:password.value},async:!0,dataType:"json",success:function(e){return 200!=e.code?(confrim.innerText=e.msg,confrim.style.display="block",setTimeout(function(){confrim.style.display="none"},1500),!1):void $.ajax({url:"https://isapi.zujiekeji.cn/index/coupon/receiveShareCoupon",type:"POST",data:{p:getQueryString("p"),userId:e.data.user_id,token:e.data.token},async:!0,dataType:"json",success:function(e){return 200!=e.code?(confrim.innerText=e.msg,confrim.style.display="block",setTimeout(function(){confrim.style.display="none"},1500),!1):(confrim.innerText="领取成功，请下载租介app进行使用",confrim.style.display="block",setTimeout(function(){confrim.style.display="none",window.location.href="http://a.app.qq.com/o/simple.jsp?pkgname=com.zujie"},3e3),void 0)},error:function(){}})},error:function(){}}),void getCard(userInfo.id,userInfo.token,activityContent.coupon_no)):(confrim.innerText="请输入密码",confrim.style.display="block",setTimeout(function(){confrim.style.display="none"},1500),!1):(confrim.innerText="请输入验证码",confrim.style.display="block",setTimeout(function(){confrim.style.display="none"},1500),!1):(confrim.innerText="请输入手机号码",confrim.style.display="block",setTimeout(function(){confrim.style.display="none"},1500),!1)});