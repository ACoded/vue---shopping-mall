"use strict";function getQueryString(e){var n=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),t=window.location.search.substr(1).match(n);return null!=t?unescape(t[2]):null}var shareConfrim=document.querySelector(".share_main_openLink");"H5"==getQueryString("type")&&(document.querySelector(".share_main_back").style.display="block"),document.querySelector(".share_main_sharebtn").addEventListener("click",function(){{var e=navigator.userAgent,n=e.indexOf("Android")>-1||e.indexOf("Adr")>-1;!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)}if("H5"==getQueryString("type")){var t=localStorage.getItem("userInfo");if(!t)return window.location.href="/#/login",!1;t=JSON.parse(t),function(){$.ajax({url:"https://isapi.zujiekeji.cn/index/coupon/activtyShare",type:"POST",data:{userId:t.id,token:t.token},async:!0,dataType:"json",success:function(e){var n=e.data.title,t=e.data.shareurl,a=e.data.sharepic,i=e.data.content;$.ajax({url:"https://isapi.zujiekeji.cn/index/wechat/getSignature",type:"GET",data:{url:t},async:!0,dataType:"json",success:function(e){shareConfrim.style.display="block",wx.config({debug:!1,appId:e.data.appId,timestamp:e.data.timestamp,nonceStr:e.data.nonceStr,signature:e.data.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ"]}),wx.error(function(){})},error:function(){}}),wx.ready(function(){wx.onMenuShareAppMessage({title:n,desc:i,link:t,imgUrl:a,trigger:function(){},success:function(){},cancel:function(){},fail:function(){}}),wx.onMenuShareTimeline({title:n,link:t,imgUrl:a,success:function(){},cancel:function(){}}),wx.onMenuShareQQ({title:n,desc:i,link:t,imgUrl:a,success:function(){},cancel:function(){}})})},error:function(){}})}()}else n?Android.shareActivity():(window.open("shareActivity"),iOS.shareActivity())}),document.querySelector(".share_main_back").addEventListener("click",function(){window.history.back(-1)});